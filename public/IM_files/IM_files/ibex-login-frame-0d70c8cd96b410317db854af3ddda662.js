(function(){var e;e=this,this.Module=function(){function t(t){var n,r,o,i;for(this.namespace=t,i=t.split("."),r=0,o=i.length;o>r;r++)n=i[r],e=e[n]||(e[n]={});null==e.require&&(e.require=function(){var e,t,r,o,i,a;return o={},e={},i=function(e){return e.split("/").slice(0,-1).join("/")},t=function(t,s){var u,c,l,f;if(l=r(s,t),c=r(l,"./index"),n=e[l]||e[c])return n;if(n=o[l]||o[l=c])return f={id:l,exports:{}},e[l]=f.exports,u=function(e){return a(e,i(l))},n(f.exports,u,f),e[l]=f.exports;throw"module "+t+" not found"},r=function(e,t){var n,r,o,i,a;for(r=[],o=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/"),i=0,a=o.length;a>i;i++)n=o[i],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},a=function(e){return t(e,"")},a.define=function(e){var t,r;r=[];for(t in e)n=e[t],r.push(o[t]=n);return r},a.modules=o,a.cache=e,a}())}return t}()}).call(this),function(){new Module("IbexLogin")}.call(this),IbexLogin.require.define({"lib/helpers":function(e,t,n){(function(){var e,t;t=function(t){return function(){var n;return n=e.userAgent().match(t),n&&parseInt(n[1])}},e={escape:function(e){return e&&(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")},sanitizeURL:function(e){return e?(e=e.replace(/javascript/g,""),encodeURI(e)):void 0},userAgent:function(){var e;e=null;try{e=localStorage.getItem("fakeUserAgent")}catch(t){}return e||window.navigator.userAgent},iOSVersion:t(/(?:iPhone OS |iPad; CPU OS )(\d+)_\d+/),androidWebkitVersion:t(/Mozilla\/5\.0.*Android.*AppleWebKit\/([\d]+)/),androidVersion:t(/Android (\d+)\.\d+/),firefoxVersion:t(/Firefox\/(\d+)\.\d+/),chromeVersion:t(/Chrome\/(\d+)\.\d+/),safariVersion:t(/Version\/(\d+)\.\d+ Safari/),isiOSChrome:function(){var t;return t=e.userAgent(),/CriOS/.test(t)},isiOSWebView:function(){var t;return t=e.userAgent(),/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t)},isiOS:function(){var t;return t=e.userAgent(),/(iPhone|iPad|iPod)/i.test(t)},isMac:function(){return e.userAgent().match(/mac/i)},isWindowsPhone:function(){var t;return t=e.userAgent(),/(Windows\sPhone|IEMobile)/i.test(t)},isWindowsOS:function(){var t;return t=e.userAgent(),/(Windows NT \d\.\d)/i.test(t)},isIE:function(){var t;return t=e.userAgent(),/(MSIE ([0-9]{1,}[\.0-9]{0,})|Trident\/)/i.test(t)},isAndroidBrowser:function(){var t;return t=e.androidWebkitVersion(),t&&537>t},isAndroidChrome:function(){var t;return t=e.androidWebkitVersion(),t&&t>537},isAndroidDevice:function(){return/Android/.test(e.userAgent())},isAndroidWebapp:function(){var t;return e.isAndroidChrome()?(t=(document.getElementsByName("apple-mobile-web-app-capable")||document.getElementsByName("mobile-web-app-capable"))[0],t&&"yes"===t.content):!1},isInsideFrame:function(){return window.top!==window.self},isFallback:function(){var t,n,r;return!("postMessage"in window)||window.postMessageDisabled||document.documentMode&&document.documentMode<8?!0:(t=e.androidVersion(),t&&4>t?!0:(r=e.iOSVersion(),r&&6>r?!0:(n=e.firefoxVersion(),n&&11>n?!0:!1)))},isTouchBrowser:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||e.userAgent().match(/FakeCheckoutTouch/))},isSmallScreen:function(){return Math.min(window.screen.availHeight,window.screen.availWidth)<=640||e.userAgent().match(/FakeCheckoutMobile/)},pad:function(e,t,n){var r;return null==t&&(t=2),null==n&&(n="0"),e+="",e.length>t?e:(r=new Array(t-e.length+1).join(n),r+e)},requestAnimationFrame:function(e){return("function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(e):void 0)||("function"==typeof window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):void 0)||window.setTimeout(e,100)},requestAnimationInterval:function(t,n){var r,o;return o=new Date,(r=function(){var i,a,s;return i=e.requestAnimationFrame(r),a=new Date,s=n-(a-o),0>=s&&(o=a,t()),i})()},getQueryParameterByName:function(e){var t;return t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search),t&&decodeURIComponent(t[1].replace(/\+/g," "))},addQueryParameter:function(e,t,n){var r,o;return o=encodeURIComponent(t)+"="+encodeURIComponent(n),r=new String(e).split("#"),r[0]+=-1!==r[0].indexOf("?")?"&":"?",r[0]+=o,r.join("#")},bind:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unbind:function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},host:function(e){var t,n;return t=document.createElement("div"),t.innerHTML='<a href="'+this.escape(e)+'">x</a>',n=t.firstChild,""+n.protocol+"//"+n.host},setAutocomplete:function(t,n){var r;return r=e.chromeVersion()>14||e.safariVersion()>7,"cc-csc"===n||/^cc-/.test(n)&&!r?t.setAttribute("autocomplete","off"):(t.setAttribute("x-autocompletetype",n),t.setAttribute("autocompletetype",n)),"country-name"!==n&&"language"!==n&&"sex"!==n&&"gender-identity"!==n&&(t.setAttribute("autocorrect","off"),t.setAttribute("spellcheck","off")),/name|honorific/.test(n)||"locality"===n||"city"===n||"adminstrative-area"===n||"state"===n||"province"===n||"region"===n||"language"===n||"org"===n||"organization-title"===n||"sex"===n||"gender-identity"===n?void 0:t.setAttribute("autocapitalize","off")}},n.exports=e}).call(this)}}),IbexLogin.require.define({"lib/jsonTools":function(exports,require,module){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,a,s=gap,u=t[e];if(u&&"object"==typeof u){var c=null;u instanceof Date?c="date":u instanceof Number?c="number":u instanceof String?c="string":u instanceof String&&(c="boolean"),c&&toJSON[c]&&(u=toJSON[c].call(u,e))}switch("function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)a[n]=str(n,u)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}var jsonTools={},toJSON={};toJSON.date=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},toJSON.string=toJSON.number=toJSON.boolean=function(){return this.valueOf()};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;jsonTools.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")},jsonTools.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("jsonTools.parse: "+text)},module.exports=jsonTools}}),function(){var e=[].slice;IbexLogin.require.define({"lib/rpc":function(t,n,r){var o,i,a;return o=n("lib/helpers"),i=n("lib/jsonTools"),r.exports=a=function(){function t(t,n){var r;if(this.target=t,null==n&&(n={}),null===n.host)throw new Error("Host should be provided");this.isServer=n.server||!0,this.host=n.host,this.rpcID=0,this.callbacks={},this.readyQueue=[],this.readyStatus=!1,this.readyToInvokeQueue=[],this.readyToInvokeStatus=!1,this.methods={},r=function(t){return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],t.message.apply(t,n)}}(this),o.bind(window,"message",r),this.readyToInvokeStatus=!0}return t.prototype.startSession=function(){return this.invoke_("frameReady"),this.frameReady()},t.prototype.invoke=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],this.ready(function(e){return function(){return e.invoke_(n,t)}}(this))},t.prototype.message=function(e){return e.source&&e.source===this.target?this.processMessage(e.data):void 0},t.prototype.ready=function(e){return this.readyStatus?e():this.readyQueue.push(e)},t.prototype.frameCallback=function(e,t){var n;return"function"==typeof(n=this.callbacks)[e]&&n[e](t),delete this.callbacks[e],!0},t.prototype.frameReady=function(){var e,t,n,r;for(this.readyStatus=!0,r=this.readyQueue,t=0,n=r.length;n>t;t++)(e=r[t])();return!1},t.prototype.isAlive=function(){return!0},t.prototype.invoke_=function(e,t){var n,r,o;return null==t&&(t=[]),n=++this.rpcID,r=t[t.length-1],"function"==typeof r&&(this.callbacks[n]=t.pop()),o=i.stringify({method:e,args:t,id:n}),this.readyToInvoke(function(e){return function(){return e.target.postMessage(o,"*")}}(this))},t.prototype.readyToInvoke=function(e){return this.readyToInvokeStatus?e():this.readyToInvokeQueue.push(e)},t.prototype.processMessage=function(e){var t,n,r;return e=i.parse(e),t=["frameReady","frameCallback","isAlive"],-1!==t.indexOf(e.method)?(n=this[e.method],"function"==typeof n&&(r=n.apply(this,e.args))):(n=this.methods[e.method],"function"==typeof n&&(r=n.apply(this.methods,e.args))),"frameCallback"!==e.method?this.invoke("frameCallback",e.id,r):void 0},t}()}})}.call(this),function(){IbexLogin.require.define({"lib/status":function(e,t,n){return n.exports={checkForMaintenance:function(){return $.ajax({type:"GET",url:"/_ping",dataType:"json"})}}}})}.call(this),IbexLogin.require.define({"lib/utils":function(e,t,n){(function(){var e,t,r,o,i,a,s,u,c,l,f,d,p,m,g,h,v,b=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},y=[].slice;e=function(e){return document.querySelectorAll(e)},t=function(e){var t,n,r,o,i,a;if("function"==typeof document.getElementsByClassName)return document.getElementsByClassName(e);if("function"==typeof document.querySelectorAll)return document.querySelectorAll("."+e);for(n=new RegExp("(^|\\s)"+e+"(\\s|$)"),i=document.getElementsByTagName("*"),a=[],r=0,o=i.length;o>r;r++)t=i[r],n.test(t.className)&&a.push(t);return a},i=function(e,t,n){return null!=n?e.setAttribute(t,n):e.getAttribute(t)},c=function(e,t){var n;return"function"==typeof e.hasAttribute?e.hasAttribute(t):(n=e.getAttributeNode(t),!(!n||!n.specified&&!n.nodeValue))},v=function(e,t,n,r){return null==n&&(n={}),null==r&&(r=!0),window.jQuery?jQuery(e).trigger(t,n):void 0},r=function(e,t){return e.className+=" "+t},z=function(e,t){if(l(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");return e.className=e.className.replace(n," ")}},l=function(e,t){return b.call(e.className.split(" "),t)>=0},a=function(e,t){return e.style.cssText+=";"+t},d=function(e,t){return e.parentNode.insertBefore(t,e)},f=function(e,t){return e.parentNode.insertBefore(t,e.nextSibling)},o=function(e,t){return e.appendChild(t)},w=function(e,t){return e.insertBefore(t,e.childNodes[0])},m=function(e){var t;return null!=(t=e.parentNode)?t.removeChild(e):void 0},p=function(e){var t;for(t=[];(e=e.parentNode)&&e!==document&&b.call(t,e)<0;)t.push(e);return t},g=function(e){var t;return t=document.createElement("a"),t.href=e,""+t.href},s=function(e){return e&&(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},h=function(e,t){return"innerText"in e?e.innerText=t:e.textContent=t,t},u=function(){var e,t,n,r,o;n=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],r={};for(e in n)o=n[e],b.call(t,e)<0&&(r[e]=o);return r},x=function(e){var t,n,r,o,i;for(n={},i=e.elements,r=0,o=i.length;o>r;r++)t=i[r],null!=n[t.name]?(n[t.name].constructor!==Array&&(n[t.name]=[n[t.name]]),n[t.name].push(t.value)):n[t.name]=t.value;return n},n.exports={$:e,$$:t,attr:i,hasAttr:c,trigger:v,addClass:r,removeClass:z,hasClass:l,css:a,insertBefore:d,insertAfter:f,append:o,prepend:w,remove:m,parents:p,resolve:g,escape:s,text:h,except:u,formToJson:x}}).call(this)}}),function(){var e,t,n,r,o,i,a,s,u,c,l,f,d,p,m,g,h,v,b,y,x,w,A,k;for(n=IbexLogin.require("lib/utils"),e=IbexLogin.require("lib/helpers"),t=IbexLogin.require("lib/rpc"),IbexLogin.configurations||(IbexLogin.configurations=[]),x=n.$$("ibex-login"),m=0,v=x.length;v>m;m++)if(i=x[m],!n.hasClass(i,"active")){for(r={},a=!!n.attr(i,"data-login"),l=!!n.attr(i,"data-sign-up"),d=!!n.attr(i,"data-update"),f=n.attr(i,"data-src")||i.src,r.el=i,r.retryCount=0,r.host=e.host(f),r.rpcMethod=a?"login":l?"signUp":d?"update":void 0,u=n.attr(i,"data-openid-connect-urls"),r.openIdConnectUrls=u?JSON.parse(u):(s=n.attr(i,"data-openid-connect-url"))?[s]:[],w=n.parents(i),g=0,b=w.length;b>g;g++)if(c=w[g],"form"===(null!=(A=c.tagName)?A.toLowerCase():void 0)){r.form=c;break}IbexLogin.configurations.push(r),n.addClass(i,"active")}for(k=IbexLogin.configurations,p=function(r){var o,a,s,u,c,l,f,d,p,m,g;if(!r.rendered)return r.iframe=f=document.createElement("iframe"),f.setAttribute("frameBorder","0"),f.setAttribute("allowtransparency","true"),f.style.cssText="z-index: 9999;\ndisplay: block;\nbackground: transparent;\nborder: 0px none transparent;\noverflow-x: hidden;\noverflow-y: auto;\nvisibility: hidden;\nmargin: 0;\npadding: 0;\n-webkit-tap-highlight-color: transparent;\n-webkit-touch-callout: none;\nposition: fixed;\nleft: 0;\ntop: 0;\nwidth: 0;\nheight: 0;",e.bind(f,"load",function(){return f.style.visibility="visible"}),f.src=""+r.host+"/embed",n.append(document.body,f),p=function(){var e,t,r,o;for(r=n.$$("ibex-error-message"),o=[],e=0,t=r.length;t>e;e++)i=r[e],i=n.$$("ibex-error-message")[0],null!=i.parentNode&&n.removeClass(i.parentNode,"error"),o.push(n.remove(i));return o},o=function(e){var t;return t=document.createElement("div"),t.className="alert-box error ibex-error-message",t.innerHTML=e,t},s=function(e){return n.prepend(r.form,o(e))},u=function(e){var t,o,i,a,s,u,c,l,f;f=[];for(a in e){for(i=e[a],u=r.form.elements["user["+a+"]"],s=(a.charAt(0).toUpperCase()+a.slice(1)).replace("_"," "),c=0,l=i.length;l>c;c++)t=i[c],o=document.createElement("small"),o.className="error ibex-error-message",o.appendChild(document.createTextNode(""+s+" "+t)),n.insertAfter(u,o);f.push(n.addClass(u.parentNode,"error"))}return f},m=new t(f.contentWindow,{host:r.host}),m.methods.loginSuccess=function(){var t;return t=function(){return c(r.form),n.trigger(r.form,"ibex:success")},e.unbind(r.form,"submit",d),$(r.form).on("ibex:complete",t),!0},m.methods.signUpSuccess=function(){var t;return t=function(){return c(r.form),n.trigger(r.form,"ibex:success")},e.unbind(r.form,"submit",d),$(r.form).on("ibex:complete",t),!0},m.methods.error=function(e){return p(),null!=e.errors&&u(e.errors),null!=e.error&&s(e.error),null==e.errors&&null==e.error&&s("There was a problem logging in or signing up."),c(r.form),!0},m.methods.displayMaintenance=function(){var e,t,s,u,c,l,f,d,p;for(n.addClass(r.form,"ibex-maintenance"),e=["facebookConnect","login-links","or","or-container"],c=0,l=e.length;l>c;c++)for(u=e[c],p=n.$$(u),d=0,f=p.length;f>d;d++)i=p[d],n.addClass(i,"ibex-maintenance");return a(r.form),t="Our sign up form and login form are down for maintenance as we\nwork on improving them. We should be back online shortly. Thank\nyou for your patience!",s=o(t),n.insertBefore(r.form,s),!0},m.methods.cookieError=function(){var e,t;return t='Your browser cannot accept cookies from the login server.\nPlease <a href="'+r.host+'/users/sign_in">login</a>\nor <a href="'+r.host+'/users/sign_up">signup</a> directly.',e=o(t),a(r.form),n.addClass(r.form,"ibex-maintenance"),n.insertBefore(r.form,e),!0},a=function(e){var t,n,r,o,i;for(o=e.elements,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push("submit"===t.type?t.disabled=!0:void 0);return i},c=function(e){var t,n,r,o,i;for(o=e.elements,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push("submit"===t.type?t.disabled=!1:void 0);return i},g=function(){var e;if(!l())return p(),e=n.formToJson(r.form),m.invoke(r.rpcMethod,e),a(r.form)},d=function(e){return e.stopPropagation(),e.preventDefault(),r.retryCount=0,g()},l=function(){var e,t,o,i,a,s,u,c;for(u=r.form.getElementsByTagName("label"),o=0,i=u.length;i>o;o++)if(t=u[o],n.hasClass(t,"error"))return!0;for(c=r.form.getElementsByTagName("input"),s=0,a=c.length;a>s;s++)if(e=c[s],n.hasClass(e,"error"))return!0;return!1},e.unbind(r.form,"submit",d),e.bind(r.form,"submit",d),r.rendered=!0},h=0,y=k.length;y>h;h++)o=k[h],p(o)}.call(this);